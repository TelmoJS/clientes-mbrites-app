<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Clientes M-Brites</title>

<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background-image: url('bg-mbrites-road.jpg');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        display: flex;
        justify-content: center;
        padding: 20px 10px;
        color: white;
    }

    .app {
        width: 100%;
        max-width: 760px;
        background: rgba(0,0,0,0.78);
        border-radius: 18px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 0 18px rgba(0,0,0,0.65);
    }

    .logo {
        width: 180px;
        margin-bottom: 12px;
    }

    .search-box {
        margin-top: 10px;
        margin-bottom: 16px;
    }

    .search {
        width: 100%;
        padding: 12px;
        border-radius: 10px;
        border: none;
        font-size: 16px;
        outline: none;
    }

    .cards {
        margin-top: 10px;
        text-align: left;
        max-height: 65vh;
        overflow-y: auto;
    }

    .card {
        background: rgba(20,20,20,0.85);
        border-left: 4px solid #00aaff;
        padding: 12px;
        border-radius: 10px;
        margin-bottom: 12px;
        animation: fadein 0.3s ease;
        font-size: 14px;
    }

    @keyframes fadein {
        from { opacity: 0; transform: translateY(10px); }
        to   { opacity: 1; transform: translateY(0); }
    }

    .btns {
        margin-top: 8px;
        display: flex;
        gap: 8px;
    }

    .btn {
        flex: 1;
        padding: 8px;
        border-radius: 8px;
        text-align: center;
        color: white;
        text-decoration: none;
        font-size: 14px;
    }

    .ligar { background: #555; }
    .maps { background: #0a8f3a; }
</style>
</head>

<body>
<div class="app">
    <img src="logo_mbrites.png" class="logo" />

    <input id="search" class="search" placeholder="Escreve ID ou nome..." />

    <div id="cards" class="cards"></div>
</div>

<script>
let clientes = [];

function normalizar(t) {
    return t == null ? "" : t.toString().toLowerCase();
}

async function carregar() {
    const resp = await fetch("clientes.json");
    clientes = await resp.json();
}

function listar() {
    const q = normalizar(document.getElementById("search").value);
    const cards = document.getElementById("cards");
    cards.innerHTML = "";

    if (!q) return;

    clientes
        .filter(c => normalizar(c["ID Cliente"]).includes(q) ||
                      normalizar(c["Cliente"]).includes(q))
        .forEach(c => {
            const id = c["ID Cliente"] ?? "";
            const nome = c["Cliente"] ?? "";
            const forn = c["Fornecedor"] ?? "";
            const local = c["Tipo Local"] ?? "";
            const desc = c["Tipo de Descarga"] ?? "";
            const tel = (c["Contacto"] ?? "").toString().trim();
            const maps = (c["Localização (Maps)"] ?? "").toString().trim();

            let html = `
                <div class="card">
                    <div><strong>ID Cliente:</strong> ${id}</div>
                    <div><strong>Fornecedor:</strong> ${forn}</div>
                    <div><strong>Local:</strong> ${local}</div>
                    <div><strong>Tipo Descarga:</strong> ${desc}</div>
            `;

            let btns = "";

            if (tel) btns += `<a class="btn ligar" href="tel:${tel}">Ligar</a>`;
            if (maps) btns += `<a class="btn maps" href="${maps}" target="_blank">Maps</a>`;

            if (btns) html += `<div class="btns">${btns}</div>`;

            html += `</div>`;
            cards.innerHTML += html;
        });
}

document.getElementById("search").addEventListener("input", listar);
carregar();
</script>

</body>
</html>
